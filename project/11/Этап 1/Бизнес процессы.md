# Бизнес-процессы

## Основные участники процессов:
- **Пользователь (Трейдер)**: Криптотрейдер, использующий платформу для поиска и анализа арбитражных возможностей
- **Система**: Веб-платформа мониторинга арбитража
- **Биржа BingX**: Внешний источник рыночных данных

---

## БП-1: Регистрация и настройка профиля

**Цель**: Создать персонализированное рабочее пространство трейдера с учетом его торговых предпочтений и стратегий.

**Роли**: Пользователь, Система

1. **Триггер**: Новый пользователь заходит на платформу и инициирует регистрацию
2. **Шаги**:
   - Пользователь заполняет регистрационную форму (email, пароль)
   - Система создает учетную запись и отправляет подтверждение на email
   - Пользователь подтверждает регистрацию
   - Система предлагает базовую настройку профиля:
     - Предпочитаемые торговые пары
     - Минимальный порог доходности для арбитража
     - Часовой пояс для отображения времени
     - Валюта для расчетов (USDT/USD)
   - Пользователь сохраняет настройки
3. **Результат**: Создан активный профиль с персональными настройками для мониторинга

---

## БП-2: Мониторинг ставок финансирования в реальном времени

**Цель**: Предоставить актуальную информацию о ставках финансирования и ценах для выявления арбитражных возможностей.

**Роли**: Пользователь, Система, Биржа BingX

1. **Триггер**: Пользователь открывает дашборд мониторинга
2. **Шаги**:
   - Система запрашивает актуальные данные с API BingX:
     - Текущие ставки финансирования по всем perpetual контрактам
     - Цены на спотовом рынке
     - Цены на perpetual рынке
     - Время до следующего платежа
   - Система рассчитывает:
     - Спред между спотовой и фьючерсной ценой
     - Годовую доходность (APY) от арбитража
     - Потенциальную прибыль с учетом комиссий
   - Система отображает данные в виде таблицы с сортировкой
   - Пользователь применяет фильтры (по доходности, объему, паре)
   - Система обновляет данные каждые 30 секунд
3. **Результат**: Пользователь видит актуальный список арбитражных возможностей

---

## БП-3: Настройка и получение алертов

**Цель**: Автоматически информировать трейдера о появлении выгодных арбитражных возможностей.

**Роли**: Пользователь, Система

1. **Триггер**: Пользователь переходит в раздел "Настройка алертов"
2. **Шаги**:
   - Пользователь создает новый алерт:
     - Выбирает торговую пару или "Все пары"
     - Устанавливает минимальную ставку финансирования (например, >0.05%)
     - Указывает минимальную годовую доходность (например, >20%)
     - Выбирает способ уведомления (email, веб-уведомление)
   - Система сохраняет правило алерта
   - Система в фоновом режиме проверяет условия каждые 5 минут
   - При срабатывании условий система:
     - Формирует уведомление с деталями возможности
     - Отправляет уведомление выбранным способом
     - Сохраняет событие в истории алертов
3. **Результат**: Пользователь оперативно узнает о появлении подходящих арбитражных возможностей

---

## БП-4: Анализ исторических данных

**Цель**: Оценить стабильность и надежность арбитражной стратегии для конкретной торговой пары.

**Роли**: Пользователь, Система

1. **Триггер**: Пользователь выбирает торговую пару для детального анализа
2. **Шаги**:
   - Пользователь указывает период анализа (7 дней, 30 дней, 90 дней)
   - Система загружает исторические данные:
     - Ставки финансирования за каждый 8-часовой период
     - Спреды между спотом и фьючерсом
   - Система рассчитывает статистику:
     - Средняя, минимальная и максимальная ставка
     - Количество отрицательных ставок
     - Суммарная доходность за период
     - Волатильность ставок
   - Система строит интерактивные графики
   - Пользователь может приблизить интересующий период на графике
3. **Результат**: Пользователь получает полную картину исторической доходности для принятия решения

---

## БП-5: Расчет арбитражной позиции

**Цель**: Рассчитать оптимальные параметры для открытия арбитражной позиции с учетом капитала и рисков.

**Роли**: Пользователь, Система

1. **Триггер**: Пользователь открывает калькулятор арбитража
2. **Шаги**:
   - Пользователь вводит параметры:
     - Доступный капитал
     - Торговая пара
     - Желаемое кредитное плечо (1x-20x)
     - Период удержания позиции (дни)
   - Система рассчитывает:
     - Размер позиции на споте и фьючерсе
     - Необходимую маржу
     - Комиссии за открытие/закрытие
     - Ожидаемый доход от funding rate
     - Чистую прибыль
     - Риски (ликвидация при движении цены)
   - Пользователь может менять параметры и видеть изменения в реальном времени
   - Система показывает симуляцию P&L при разных сценариях
3. **Результат**: Пользователь понимает потенциальную прибыль и риски перед открытием позиции

---

## БП-6: Сохранение и управление портфелем арбитражных позиций

**Цель**: Отслеживать открытые арбитражные позиции и их эффективность.

**Роли**: Пользователь, Система

1. **Триггер**: Пользователь добавляет открытую позицию в портфель
2. **Шаги**:
   - Пользователь вводит данные позиции:
     - Торговая пара
     - Размер позиции (спот и фьючерс)
     - Цены входа
     - Дата открытия
   - Система сохраняет позицию в портфеле
   - Система автоматически отслеживает:
     - Накопленный доход от funding rate
     - Нереализованный P&L
     - Текущее здоровье позиции
   - Пользователь может:
     - Отметить позицию как закрытую
     - Просмотреть историю всех позиций
     - Увидеть общую статистику портфеля
3. **Результат**: Пользователь имеет полный контроль над своими арбитражными стратегиями

---

## БП-7: Экспорт данных для внешнего анализа

**Цель**: Предоставить возможность глубокого анализа данных в сторонних инструментах.

**Роли**: Пользователь, Система

1. **Триггер**: Пользователь нажимает кнопку "Экспорт данных"
2. **Шаги**:
   - Пользователь выбирает:
     - Тип данных (текущие ставки, история, портфель)
     - Формат файла (CSV, JSON, Excel)
     - Период (для исторических данных)
   - Система формирует файл с данными
   - Система предоставляет ссылку для скачивания
   - Пользователь скачивает файл
3. **Результат**: Пользователь может проводить дополнительный анализ в Excel или других инструментах