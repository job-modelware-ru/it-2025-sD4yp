@startuml
title Диаграмма деятельности: Удаление комнаты (плейлиста)

|Пользователь|
start
:Открыть настройки комнаты;
:Нажать кнопку "Удалить комнату";

|Система|
:Проверка прав доступа;
note right
  Только создатель (Host)
  может удалить комнату
end note

if (Есть права?) then (нет)
  :Показать ошибку "Доступ запрещен";
  stop
else (да)
  :Показать диалог подтверждения;
  note right
    Текст: "Вы уверены?
    Плейлист будет удален безвозвратно."
  end note
endif

if (Подтверждаете удаление?) then (нет / отмена)
  :Нажать "Отмена";
  |Система|
  :Закрыть диалог;
  stop
else (да / удалить)
  |Система|
  :Изменить статус комнаты на "Закрыта";
  
  partition "Очистка данных" {
    :Удалить Connection участников;
    :Удалить треки плейлиста из БД;
    :Удалить запись о комнате из БД;
  }
  
  :Вернуть ответ об успешном удалении;
  :Перенаправить на Главный экран;
  
  stop
endif
@enduml